{% extends "reportes/reporte_base.html" %}

{% block graficos_js %}
<script>
document.addEventListener("DOMContentLoaded", function() {
  // Labels y valores desde los rows
  const labels = [{% for row in data.rows %}"{{ row.0 }}",{% endfor %}];
  const valores = [{% for row in data.rows %}{{ row.1 }},{% endfor %}];
  const colores = [
    "#198754", "#dc3545", "#ffc107", "#0d6efd",
    "#6f42c1", "#fd7e14", "#20c997", "#6610f2",
    "#e83e8c", "#17a2b8"
  ];

  // Gráfico de barras
  new Chart(document.getElementById("graficoBarras"), {
    type: "bar",
    data: { labels, datasets:[{ data: valores, backgroundColor: colores }] },
    options: {
      responsive:true,
      plugins:{ legend:{ display:false } },
      scales:{ y:{ beginAtZero:true } }
    }
  });

  // Gráfico de torta
  new Chart(document.getElementById("graficoTorta"), {
    type: "pie",
    data: { labels, datasets:[{ data: valores, backgroundColor: colores }] },
    options: { responsive:true }
  });
});
</script>
{% endblock %}